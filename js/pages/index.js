let selection = document.getElementById("selectCity");

function addCitiesToSelection() { 
    let cities = getCitiesFromLocalStorage();
    
    if (cities.length == 0) { 
        selection.innerHTML += `<option disabled selected>No hay ciudades agregadas</option>`
    }
    else {
   
        selection.innerHTML += `<option value="" disabled selected>Seleccionar Ciudad</option>`
        for (let i = 0; i < cities.length; i++) { 
            selection.innerHTML += `<option value="${cities[i]}">${cities[i]}</option>`
        }
    }
}

async function Weather() {

    let data = await API(selection.value);
    const spinner = document.getElementById('carga')
    spinner.style.visibility = 'visible';/**/
    
    document.getElementById('showCard').style.visibility = 'hidden';
 
    setTimeout(() => {/* comienzo Settime*************/
      
/* let data = await API(selection.value); lo pase a la linea 26 para que cargue la cuidades primero de todo*/
/*const cargando = document.getElementById("carga");
    cargando.style.display = 'none';*/
    spinner.style.visibility = 'hidden';
    document.getElementById('showCard').style.visibility = 'visible';
}, 2000);/*Hasta ahi settinme**** */   

    const weatherData={
        ciudad: data.name,
        icono: data.weather[0].icon,
        temperatura: data.main.temp,
        sensacionTermica: data.main.feels_like,
        humedad: data.main.humidity,
        viento: data.wind.speed,
        presion: data.main.pressure,
    }
   
    let card = `<div class="card"> 
                    <h3>${weatherData.ciudad}</h3>
                    <img src="http://openweathermap.org/img/wn/${weatherData.icono}.png" alt="Imagen">
                    <p>Temperatura: ${weatherData.temperatura}°</p>
                    <p>Sensación Térmica: ${weatherData.sensacionTermica}°</p>
                    <p>Humedad: ${weatherData.humedad}%</p>
                    <p>Velocidad del Viento: ${weatherData.viento}km/h</p>
                    <p>Presión: ${weatherData.presion} P</p>
                </div>`

    let section = document.getElementById("showCard");
    if (section) {
        section.innerHTML = "";
        section.innerHTML += card;
    }

}








let weatherButton = document.getElementById("consultar");
weatherButton.addEventListener("click", Weather)

addCitiesToSelection();
























































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































